<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Dropdown Calculator</title>
	<style>
		body {
			font-family: sans-serif;
			padding: 20px;
			max-width: 300px;
			margin: auto;
		}

		select,
		button {
			width: 100%;
			padding: 8px;
			margin: 10px 0;
		}

		#result {
			margin-top: 20px;
			font-weight: bold;
		}
	</style>
	<script type="text/javascript" defer>
		const EULERGAMMA = 0.5772156649;
		function constantValue(value) {
			switch (value) {
				case "pi": return Math.PI;
				case "e": return Math.E;
				case "phi": return (1 + Math.sqrt(5)) / 2;
				case "tau": return Math.PI * 2;
				case "sigma": return 1 + Math.sqrt(2); // silver ratio
				case "gamma": return EULERGAMMA; // Euler–Mascheroni constant
				default: return parseFloat(value);
			}
		}

		function applyOp(a, op, b) {
			switch (op) {
				case '+': return a + b;
				case '-': return a - b;
				case '*': return a * b;
				case '/': return b === 0 ? '÷0 = undefined' : a / b;
				case '^': return Math.pow(a, b);
				case '√': return b === 0 ? 'root 0 = undefined' : Math.pow(a, 1 / b);
				default: return NaN;
			}
		}

		function calculate() {
			const n1 = constantValue(document.getElementById('num1').value);
			const op1 = document.getElementById('op1').value;
			const n2 = constantValue(document.getElementById('num2').value);
			const op2 = document.getElementById('op2').value;
			const n3 = constantValue(document.getElementById('num3').value);
			const brackets = document.getElementById('brackets').value;

			let result;

			try {
				if (brackets === "left") {
					const left = applyOp(n1, op1, n2);
					if (typeof left === 'string') throw left;
					result = applyOp(left, op2, n3);
				} else if (brackets === "right") {
					const right = applyOp(n2, op2, n3);
					if (typeof right === 'string') throw right;
					result = applyOp(n1, op1, right);
				} else {
					const precedence = { '+': 1, '-': 1, '*': 2, '/': 2, '^': 3, '√': 3 };
					if (precedence[op2] > precedence[op1]) {
						const temp = applyOp(n2, op2, n3);
						if (typeof temp === 'string') throw temp;
						result = applyOp(n1, op1, temp);
					} else {
						const temp = applyOp(n1, op1, n2);
						if (typeof temp === 'string') throw temp;
						result = applyOp(temp, op2, n3);
					}
				}

				if (!isFinite(result)) throw 'Result is not finite';

				// Apply rounding mode after final result calculation
				const mode = document.getElementById('mode').value;
				if (mode === 'floor') result = Math.floor(result);
				else if (mode === 'ceil') result = Math.ceil(result);

			} catch (e) {
				result = 'Error: ' + e;
			}

			document.getElementById('result').textContent = 'Result: ' + result;
		}
	</script>
</head>

<body>

	<h2>Calculator</h2>

	<!-- First Number -->
	<label for="num1">First Number:</label>
	<select id="num1">
		<option value="0">0</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
		<option value="9">9</option>
		<option value="pi">π</option>
		<option value="e">e</option>
		<option value="phi">φ</option>
		<option value="tau">τ</option>
		<option value="sigma">σ</option>
		<option value="gamma">γ</option>
	</select>

	<!-- First Operator -->
	<label for="op1">First Operator:</label>
	<select id="op1">
		<option value="+">Add (+)</option>
		<option value="-">Subtract (-)</option>
		<option value="*">Multiply (*)</option>
		<option value="/">Divide (÷)</option>
		<option value="^">Exponentiate (^)</option>
		<option value="√">nth Root (√)</option>
	</select>

	<!-- Second Number -->
	<label for="num2">Second Number:</label>
	<select id="num2">
		<option value="0">0</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
		<option value="9">9</option>
		<option value="pi">π</option>
		<option value="e">e</option>
		<option value="phi">φ</option>
		<option value="tau">τ</option>
		<option value="sigma">σ</option>
		<option value="gamma">γ</option>
	</select>

	<!-- Second Operator -->
	<label for="op2">Second Operator:</label>
	<select id="op2">
		<option value="+">Add (+)</option>
		<option value="-">Subtract (-)</option>
		<option value="*">Multiply (*)</option>
		<option value="/">Divide (÷)</option>
		<option value="^">Exponentiate (^)</option>
		<option value="√">nth Root (√)</option>
	</select>

	<!-- Third Number -->
	<label for="num3">Third Number:</label>
	<select id="num3">
		<option value="0">0</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
		<option value="9">9</option>
		<option value="pi">π</option>
		<option value="e">e</option>
		<option value="phi">φ</option>
		<option value="tau">τ</option>
		<option value="sigma">σ</option>
		<option value="gamma">γ</option>
	</select>

	<label for="brackets">Brackets:</label>
	<select id="brackets">
		<option value="none">None</option>
		<option value="left">(n1 op1 n2) op2 n3</option>
		<option value="right">n1 op1 (n2 op2 n3)</option>
	</select>

	<label for="mode">Result Mode:</label>
	<select id="mode">
		<option value="none">None</option>
		<option value="floor">Floor</option>
		<option value="ceil">Ceil</option>
	</select>

	<!-- Calculate Button -->
	<button onclick="calculate()">Calculate</button>

	<!-- Result -->
	<div id="result">Result: </div>

</body>

</html>